!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s="./index.js")}({"../node_modules/css-loader/index.js!../node_modules/postcss-loader/index.js?{}!./helpers/style.css":function(e,t,r){t=e.exports=r("../node_modules/css-loader/lib/css-base.js")(),t.push([e.i,"body{background:#000;display:-ms-flexbox;display:flex;color:#fff;font-family:sans-serif;font-size:2em;text-align:center}.player{-ms-flex:1 1 auto;flex:1 1 auto}canvas{border:.2em solid #fff;height:90vh}",""])},"../node_modules/css-loader/lib/css-base.js":function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t];r[2]?e.push("@media "+r[2]+"{"+r[1]+"}"):e.push(r[1])}return e.join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},o=0;o<this.length;o++){var s=this[o][0];"number"==typeof s&&(n[s]=!0)}for(o=0;o<t.length;o++){var a=t[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},"../node_modules/style-loader/addStyles.js":function(e,t){function r(e,t){for(var r=0;r<e.length;r++){var n=e[r],o=d[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(c(n.parts[s],t))}else{for(var a=[],s=0;s<n.parts.length;s++)a.push(c(n.parts[s],t));d[n.id]={id:n.id,refs:1,parts:a}}}}function n(e){for(var t=[],r={},n=0;n<e.length;n++){var o=e[n],s=o[0],a=o[1],i=o[2],c=o[3],u={css:a,media:i,sourceMap:c};r[s]?r[s].parts.push(u):t.push(r[s]={id:s,parts:[u]})}return t}function o(e,t){var r=v(),n=x[x.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function i(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function c(e,t){var r,n,o;if(t.singleton){var c=y++;r=m||(m=a(t)),n=u.bind(null,r,c,!1),o=u.bind(null,r,c,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=i(t),n=f.bind(null,r),o=function(){s(r),r.href&&URL.revokeObjectURL(r.href)}):(r=a(t),n=l.bind(null,r),o=function(){s(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}function u(e,t,r,n){var o=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var s=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}function l(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function f(e,t){var r=t.css,n=t.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var d={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},h=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,x=[];e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},"undefined"==typeof t.singleton&&(t.singleton=h()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var o=n(e);return r(o,t),function(e){for(var s=[],a=0;a<o.length;a++){var i=o[a],c=d[i.id];c.refs--,s.push(c)}if(e){var u=n(e);r(u,t)}for(var a=0;a<s.length;a++){var c=s[a];if(0===c.refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete d[c.id]}}}};var g=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},"./components/arena.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(t,"a",function(){return o});var o=function e(t,r){var o=this;n(this,e),this.clear=function(){return o.matrix.forEach(function(e){return e.fill(0)})},this.collide=function(e){for(var t=[e.matrix,e.pos],r=t[0],n=t[1],s=0;s<r.length;++s)for(var a=0;a<r[s].length;++a)if(0!==r[s][a]&&0!==(o.matrix[s+n.y]&&o.matrix[s+n.y][a+n.x]))return!0;return!1},this.merge=function(e){e.matrix.forEach(function(t,r){t.forEach(function(t,n){0!==t&&(o.matrix[r+e.pos.y][n+e.pos.x]=t)})})},this.sweep=function(){var e=1,t=0;e:for(var r=o.matrix.length-1;r>0;--r){for(var n=0;n<o.matrix[r].length;++n)if(0===o.matrix[r][n])continue e;var s=o.matrix.splice(r,1)[0].fill(0);o.matrix.unshift(s),++r,t+=10*e,e*=2}return t};for(var s=[];r--;)s.push(new Array(t).fill(0));this.matrix=s}},"./components/game.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r("./helpers/colors.js"),s=r("./components/player.js"),a=r("./components/arena.js");r.d(t,"a",function(){return i});var i=function e(t){var r=this;n(this,e),this.draw=function(){r.context.fillStyle="#000",r.context.fillRect(0,0,r.canvas.width,r.canvas.height),r.drawMatrix(r.arena.matrix,{x:0,y:0}),r.drawMatrix(r.player.matrix,r.player.pos)},this.drawMatrix=function(e,t){e.forEach(function(e,n){e.forEach(function(e,o){0!==e&&(r.context.fillStyle=r.colors[e],r.context.fillRect(o+t.x,n+t.y,1,1))})})},this.updateScore=function(e){return r.element.querySelector(".score").innerText=e},this.element=t,this.canvas=t.querySelector("canvas"),this.context=this.canvas.getContext("2d"),this.context.scale(20,20),this.arena=new a.a(12,20),this.player=new s.a(this),this.colors=o.a;var i=0,c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t-i;i=t,r.player.update(n),r.draw(),requestAnimationFrame(e)};c(),this.updateScore(0)}},"./components/player.js":function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r("./helpers/createPiece.js");r.d(t,"a",function(){return s});var s=function e(t){var s=this;n(this,e),this.drop=function(){s.pos.y++,s.arena.collide(s)&&(s.pos.y--,s.arena.merge(s),s.reset(),s.score+=s.arena.sweep(),s.tetris.updateScore(s.score)),s.dropCounter=0},this.move=function(e){s.pos.x+=e,s.arena.collide(s)&&(s.pos.x-=e)},this.reset=function(){var e="ILJOTSZ";s.matrix=r.i(o.a)(e[e.length*Math.random()|0]),s.pos.y=0,s.pos.x=(s.arena.matrix[0].length/2|0)-(s.matrix[0].length/2|0),s.arena.collide(s)&&(s.arena.clear(),s.score=0,s.tetris.updateScore())},this.rotate=function(e){var t=s.pos.x,r=1;for(s.rotateMatrix(s.matrix,e);s.arena.collide(s);)if(s.pos.x+=r,r=-(r+(r>0?1:-1)),r>s.matrix[0].length)return s.rotateMatrix(s.matrix,-e),void(s.pos.x=t)},this.rotateMatrix=function(e,t){for(var r=0;r<e.length;++r)for(var n=0;n<r;++n){var o=[e[r][n],e[n][r]];e[n][r]=o[0],e[r][n]=o[1]}t>0?e.forEach(function(e){return e.reverse()}):e.reverse()},this.update=function(e){s.dropCounter+=e,s.dropCounter>s.dropInterval&&s.drop()},this.DROP_SLOW=1e3,this.DROP_FAST=50,this.tetris=t,this.arena=t.arena,this.dropCounter=0,this.dropInterval=this.DROP_SLOW,this.pos={x:0,y:0},this.matrix=null,this.score=0,this.reset()}},"./helpers/colors.js":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=[null,"#FF0D72","#0DC2FF","#0DFF72","#F538FF","#FF8E0D","#FFE138","#3877FF"]},"./helpers/createPiece.js":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){return"T"===e?[[0,0,0],[1,1,1],[0,1,0]]:"O"===e?[[2,2],[2,2]]:"L"===e?[[0,3,0],[0,3,0],[0,3,3]]:"J"===e?[[0,4,0],[0,4,0],[4,4,0]]:"I"===e?[[0,5,0,0],[0,5,0,0],[0,5,0,0],[0,5,0,0]]:"S"===e?[[0,6,6],[6,6,0],[0,0,0]]:"Z"===e?[[7,7,0],[0,7,7],[0,0,0]]:void 0}},"./helpers/keys.js":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=[[65,68,81,69,83],[72,75,89,73,74]]},"./helpers/style.css":function(e,t,r){var n=r("../node_modules/css-loader/index.js!../node_modules/postcss-loader/index.js?{}!./helpers/style.css");"string"==typeof n&&(n=[[e.i,n,""]]);r("../node_modules/style-loader/addStyles.js")(n,{});n.locals&&(e.exports=n.locals)},"./index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./helpers/style.css"),o=(r.n(n),r("./components/game.js")),s=r("./helpers/keys.js"),a=[],i=Array.from(document.querySelectorAll(".player"));i.forEach(function(e){var t=new o.a(e);a.push(t)});var c=function(e){s.a.forEach(function(t,r){var n=a[r].player;if("keydown"===event.type)switch(e.keyCode){case t[0]:n.move(-1);break;case t[1]:n.move(1);break;case t[2]:n.rotate(-1);break;case t[3]:n.rotate(1)}event.keyCode===t[4]&&("keydown"===event.type?n.dropInterval!==n.DROP_FAST&&(n.drop(),n.dropInterval=n.DROP_FAST):n.dropInterval=n.DROP_SLOW)})};document.addEventListener("keydown",c),document.addEventListener("keyup",c)}});